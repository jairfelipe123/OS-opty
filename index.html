<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>optiOS</title>
  <style>
    :root {
      --bg-color: #f2f2f7;
      --text-color: #000;
      --item-color: #fff;
      --status-bar-bg: rgba(255, 255, 255, 0.8);
      --status-bar-text: #000;
    }

    [data-theme="dark"] {
      --bg-color: #1c1c1e;
      --text-color: #fff;
      --item-color: #2c2c2e;
      --status-bar-bg: rgba(28, 28, 30, 0.8);
      --status-bar-text: #fff;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: url('https://cdn.ipadizate.com/2022/04/iPhone13ProMax-iPhone13Pro-iPhone13-iPhone13Mini-iPhone12ProMax-iPhone12Pro-iPhone12-iPhone12Mini-iPhone11ProMax-iPhone11-iPhone11Pro-iPhoneXSMax-iPhoneXR-iPhoneXS-iPhoneX-@AR72014-2.png') no-repeat center center;
      background-size: cover;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Status Bar */
    .status-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 44px;
      background: var(--status-bar-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 15px;
      color: var(--status-bar-text);
      font-size: 14px;
      font-weight: 600;
      z-index: 100;
    }

    .status-left {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .status-right {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    /* Control Center */
    .control-center {
      position: fixed;
      top: 0;
      right: -100%;
      width: 380px;
      max-width: 90vw;
      height: 100vh;
      background: rgba(28, 28, 30, 0.95);
      backdrop-filter: blur(40px);
      -webkit-backdrop-filter: blur(40px);
      padding: 60px 20px 20px 20px;
      z-index: 200;
      transition: right 0.4s cubic-bezier(0.32, 0.72, 0, 1);
      box-shadow: -5px 0 20px rgba(0, 0, 0, 0.3);
      overflow-y: auto;
    }

    .control-center.active {
      right: 0;
    }

    .control-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .control-item {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      padding: 20px;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
      color: white;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .control-item:active {
      transform: scale(0.95);
    }

    .control-item.active {
      background: rgba(0, 122, 255, 0.8);
    }

    .control-item-icon {
      font-size: 28px;
    }

    .control-item-label {
      font-size: 14px;
      font-weight: 600;
      margin-top: 8px;
    }

    .brightness-slider {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 15px;
    }

    .brightness-slider input {
      width: 100%;
      -webkit-appearance: none;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.3);
      outline: none;
    }

    .brightness-slider input::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: white;
      cursor: pointer;
    }

    .springboard {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      padding: 60px 20px 100px 20px;
      justify-items: center;
      flex: 1;
      overflow-y: auto;
    }

    .app-icon {
      width: 70px;
      height: 70px;
      background: #ccc;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      text-align: center;
      cursor: pointer;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: transform 0.1s, opacity 0.1s;
      position: relative;
    }

    .app-icon:active {
      transform: scale(1.85);
    }

    .app-icon.launching {
      transform: scale(1.1);
      opacity: 0;
    }

    .app-icon span {
      color: #fff;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }

    .app-icon-emoji {
      font-size: 30px;
      margin-bottom: 5px;
    }

    #settings-app,
    .subscreen {
      position: fixed;
      top: 0; 
      left: 0;
      width: 100vw; 
      height: 100vh;
      background: var(--bg-color);
      color: var(--text-color);
      display: flex;
      flex-direction: column;
      transform: scale(0.01);
      opacity: 0;
      pointer-events: none;
      transition: transform 0.5s cubic-bezier(0.42, 0, 0.275, 1.155), 
                  opacity 0.3s ease;
      transform-origin: var(--origin-x, 50%) var(--origin-y, 50%);
      border-radius: 40px;
      overflow: hidden;
      z-index: 150;
    }

    #settings-app.active,
    .subscreen.active {
      transform: scale(1);
      opacity: 1;
      pointer-events: all;
      border-radius: 0;
    }

    #settings-app.closing,
    .subscreen.closing {
      transform: scale(0.01);
      opacity: 0;
      border-radius: 40px;
    }

    .settings-header {
      background: var(--item-color);
      padding: 16px;
      padding-top: 60px;
      font-weight: bold;
      font-size: 28px;
      text-align: left;
      padding-left: 20px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .settings-list {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
    }

    .settings-item {
      background: var(--item-color);
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 10px;
      font-size: 16px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      gap: 10px;
      cursor: pointer;
      transition: transform 0.1s;
    }

    .settings-item:active {
      transform: scale(0.98);
    }

    label, select, input[type="file"] {
      font-size: 14px;
      cursor: pointer;
    }

    .wallpapers {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wallpapers img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 10px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: transform 0.2s;
    }

    .wallpapers img:hover {
      border-color: #007aff;
      transform: scale(1.05);
    }

    .home-button {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 15px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 120px;
      cursor: pointer;
      z-index: 160;
      transition: transform 0.1s;
    }

    .home-button:active {
      transform: translateX(-50%) scale(0.900);
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      z-index: 199;
    }

    .overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    /* Safari Styles */
    .safari-header {
      background: var(--item-color);
      padding-top: 50px;
      padding-bottom: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .safari-toolbar {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 0 15px;
    }

    .safari-btn {
      background: rgba(0, 122, 255, 0.1);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 10px;
      font-size: 20px;
      cursor: pointer;
      color: #007aff;
      transition: background 0.2s;
    }

    .safari-btn:active {
      background: rgba(0, 122, 255, 0.2);
    }

    .safari-search-container {
      flex: 1;
      display: flex;
      gap: 8px;
      background: var(--bg-color);
      border-radius: 10px;
      padding: 8px 12px;
    }

    .safari-search {
      flex: 1;
      border: none;
      background: transparent;
      font-size: 16px;
      outline: none;
      color: var(--text-color);
    }

    .safari-go-btn {
      background: #007aff;
      color: white;
      border: none;
      padding: 6px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: background 0.2s;
    }

    .safari-go-btn:active {
      background: #0051cc;
    }

    .safari-content {
      flex: 1;
      overflow: hidden;
      background: white;
    }

    /* Calculator Styles */
    #calculator-app {
      background: #3d3d3d;
    }

    .calc-display {
      padding: 60px 20px 20px 20px;
      text-align: right;
      font-size: 64px;
      font-weight: 200;
      color: white;
      min-height: 180px;
      display: flex;
      align-items: flex-end;
      justify-content: flex-end;
      overflow: hidden;
      word-wrap: break-word;
    }

    .calc-buttons {
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      flex: 1;
      align-content: center;
      max-height: calc(100vh - 250px);
    }

    .calc-btn {
      aspect-ratio: 1;
      border-radius: 500%;
      border: none;
      font-size: 60px;
      font-weight: 40;
      cursor: pointer;
      transition: opacity 0.2s;
      color: white;
      max-width: 100px;
      max-height: 85px;
      justify-self: center;
    }

    .calc-btn:active {
      opacity: 0.5;
    }

    .calc-btn-number {
      background: #000000;
    }

    .calc-btn-operator {
      background: #ff9500;
      font-size: 36px;
    }

    .calc-btn-function {
      background: #a5a5a5;
      color: #000;
    }

    .calc-btn-zero {
      grid-column: span 2;
      border-radius: 50px;
      aspect-ratio: auto;
      max-width: 180px;
      width: 100%;
      text-align: left;
      padding-left: 32px;
    }
  </style>
</head>
<body data-theme="light">
  <!-- Status Bar -->
  <div class="status-bar">
    <div class="status-left">
      <span id="time">9:41</span>
    </div>
    <div class="status-right" onclick="toggleControlCenter()">
      <span>üì∂</span>
      <span>üì°</span>
      <span id="battery">üîã 100%</span>
    </div>
  </div>

  <!-- Overlay -->
  <div class="overlay" id="overlay" onclick="closeControlCenter()"></div>

  <!-- Control Center -->
  <div class="control-center" id="control-center">
    <div class="control-grid">
      <div class="control-item" onclick="toggleItem(this, 'wifi')">
        <div>
          <div class="control-item-icon">üì°</div>
          <div class="control-item-label">Wi-Fi</div>
        </div>
      </div>
      <div class="control-item" onclick="toggleItem(this, 'bluetooth')">
        <div>
          <div class="control-item-icon">üîµ</div>
          <div class="control-item-label">Bluetooth</div>
        </div>
      </div>
      <div class="control-item" onclick="toggleItem(this, 'airplane')">
        <div>
          <div class="control-item-icon">‚úàÔ∏è</div>
          <div class="control-item-label">Avi√≥n</div>
        </div>
      </div>
      <div class="control-item" onclick="toggleItem(this, 'focus')">
        <div>
          <div class="control-item-icon">üåô</div>
          <div class="control-item-label">No molestar</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pantalla principal -->
  <div class="springboard" id="springboard">
    <div class="app-icon" onclick="openSettings()">
      <div class="app-icon-emoji">‚öôÔ∏è</div>
      <span>Ajustes</span>
    </div>
    <div class="app-icon" onclick="openSafari()" style="background: linear-gradient(135deg, #00aaff 0%, #0077cc 100%);">
      <div class="app-icon-emoji">üß≠</div>
      <span>Safari</span>
    </div>
    <div class="app-icon" onclick="openCalculator()" style="background: linear-gradient(135deg, #000000 0%, #000000 100%);">
      <div class="app-icon-emoji">üî¢</div>
      <span>Calculadora</span>
    </div>
    <div class="app-icon" onclick="openOptiMusic()" style="background: linear-gradient(135deg, #ff6a00 0%, #ee0979 100%);">
  <div class="app-icon-emoji">üéµ</div>
  <span>OptiMusic</span>
</div>


<div class="app-icon" onclick="notas()" style="background: linear-gradient(135deg, #71706e 0%, #4e4b4b 100%);">
  <div class="app-icon-emoji">üóíÔ∏è</div>
  <span>OptiNotas</span>
</div>


<div class="app-icon" onclick="openReloj()" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
  <div class="app-icon-emoji">‚è∞</div>
  <span>Reloj</span>
</div>


<div class="app-icon" onclick="openGoogleMapa()" style="background: linear-gradient(135deg, #34a853 0%, #4285f4 100%);">
  <div class="app-icon-emoji">üó∫Ô∏è</div>
  <span>Google Mapa</span>
</div>

  </div>

  <!-- App Ajustes -->
  <div id="settings-app">
    <div class="settings-header">Ajustes</div>
    <div class="settings-list">





      <div class="settings-item" onclick="openGeneral()">
        <label>General</label>
      </div>
      <div class="settings-item" onclick="openGuide()">
  <label>Gu√≠a de uso</label>
</div>

    </div>

    <div class="home-button" onclick="closeSettings()"></div>
  </div>

  <!-- Pantalla General -->
  <div id="general-screen" class="subscreen">
    <div class="settings-header">General</div>
    <div class="settings-list">
      <div class="settings-item" onclick="openInfo()">
        <label>Informaci√≥n</label>
      </div>


            <div class="settings-item">
        <label for="darkMode">Modo oscuro</label>
        <input type="checkbox" id="darkMode" onchange="toggleDarkMode()">
      </div>

            <div class="settings-item">
        <label>Fondo de Pantalla</label>
        <input type="file" accept="image/*" onchange="uploadCustomWallpaper(event)">
        <div class="wallpapers">
          <img src="https://i.pinimg.com/736x/af/c6/6d/afc66d9445a1bb8cfb40d1a1cfa5b33f.jpg" onclick="setWallpaper(this.src)">
          <img src="https://wallpapers.com/images/featured/iphone-wltnz5o1xymafqmo.jpg" onclick="setWallpaper(this.src)">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTiUmN6zh-PyruRsLo1d0nJjFnMsFuGQw_suA&s" onclick="setWallpaper(this.src)">
        </div>
      </div>
    </div>
    <div class="home-button" onclick="closeGeneral()"></div>
  </div>


<div id="guide-screen" class="subscreen">
  <div class="settings-header">Gu√≠a de uso</div>
  <div class="settings-list">
    <div class="settings-item">
      <p style="line-height: 1.6;">
        <strong>Bienvenido a optiOS</strong><br><br>
        optiOS es un sistema operativo simulado con una experiencia visual similar a iOS, dise√±ado para experimentar una interfaz moderna, fluida y personalizable dentro del navegador.<br><br>

        üîπ <strong>Interfaz principal:</strong><br>
        Al iniciar, ver√°s una cuadr√≠cula con √≠conos de aplicaciones como Ajustes, Safari o Calculadora. Toca cualquiera para abrirla. Las animaciones brindan una experiencia de apertura fluida y realista.<br><br>

        üîπ <strong>Cierre de aplicaciones:</strong><br>
        Para cerrar cualquier app abierta, pulsa la barra inferior (el bot√≥n de inicio). Esto te regresar√° a la pantalla principal.<br><br>

        üîπ <strong>Centro de control:</strong><br>
        Puedes acceder a funciones r√°pidas como Wi-Fi, Bluetooth, modo Avi√≥n o ‚ÄúNo molestar‚Äù tocando el √≠cono de bater√≠a en la parte superior derecha. Se abrir√° una ventana lateral con controles interactivos.<br><br>

        üîπ <strong>Aplicaci√≥n de Ajustes:</strong><br>
        Desde aqu√≠ puedes:<br>
        - Activar o desactivar el modo oscuro.<br>
        - Cambiar el fondo de pantalla por im√°genes predeterminadas o cargar una imagen personalizada.<br>
        - Entrar a secciones como ‚ÄúGeneral‚Äù para ver informaci√≥n del sistema (nombre, versi√≥n, etc).<br>
        - Acceder a esta gu√≠a de ayuda.<br><br>

        üîπ <strong>Modo oscuro:</strong><br>
        Al activarlo, el sistema cambia autom√°ticamente los colores del fondo y elementos para ofrecerte una experiencia m√°s c√≥moda en ambientes con poca luz.<br><br>

        üîπ <strong>Navegador Safari:</strong><br>
        Es un navegador web b√°sico donde puedes ingresar URLs o hacer b√∫squedas directamente. El sistema detecta si es una direcci√≥n o una b√∫squeda y act√∫a en consecuencia.<br><br>

        üîπ <strong>Calculadora:</strong><br>
        Es una calculadora funcional con operaciones b√°sicas (+, ‚Äì, √ó, √∑), porcentaje, cambio de signo, y limpieza de memoria. Funciona como una calculadora real.<br><br>

        üîπ <strong>Animaciones:</strong><br>
        Cada aplicaci√≥n y transici√≥n est√° animada para simular la fluidez del sistema operativo real. Puedes usar esto como inspiraci√≥n para proyectos de front-end o dise√±o de UX.<br><br>

        Este sistema est√° en constante evoluci√≥n. Puedes seguir agregando apps, configuraciones y funciones nuevas para personalizar a√∫n m√°s tu experiencia.<br><br>

        üéâ ¬°Explora libremente, experimenta y divi√©rtete con optiOS!
      </p>
    </div>
  </div>
  <div class="home-button" onclick="closeGuide()"></div>
</div>


<div id="optimusic-app" class="subscreen">
  <div class="settings-header">OptiMusic</div>
  <div class="settings-list">
    <div class="settings-item">
      <label for="musicFiles">üé∂ ¬°Selecciona tus canciones favoritas!</label>
      <input type="file" id="musicFiles" accept="audio/*" multiple onchange="handleMusicFiles(event)">
    </div>

    <div class="settings-item">
      <label>üéß Lista de reproducci√≥n:</label>
      <ul id="musicList" style="padding-left: 20px;"></ul>
    </div>

    <div class="settings-item">
      <audio id="musicPlayer" controls style="width: 100%;">
        Tu navegador no soporta el elemento de audio.
      </audio>
    </div>
  </div>
  <div class="home-button" onclick="closeOptiMusic()"></div>
</div>


<div id="notas-app" class="subscreen">
  <div class="settings-header">Notas</div>
  <div class="settings-list">
    <div class="settings-item">
      <label for="noteArea">üìù Escribe tus notas:</label>
      <textarea id="noteArea" placeholder="Escribe aqu√≠..." style="width: 100%; height: 200px; resize: none;"></textarea>
    </div>
    <div class="settings-item">
      <button onclick="guardarNota()" style="width: 100%;">üíæ Guardar Nota</button>
    </div>
  </div>
  <div class="home-button" onclick="closeNotas()"></div>
</div>


<div id="reloj-app" class="subscreen">
  <div class="settings-header">Reloj</div>
  <div class="settings-list">
    <div class="settings-item" style="text-align: center;">
      <h1 id="reloj-hora" style="font-size: 48px; margin: 20px 0;">--:--:--</h1>
      <p>üïí Hora actual actualizada en tiempo real</p>
    </div>
  </div>
  <div class="home-button" onclick="closeReloj()"></div>
</div>







<div id="googlemapa-app" class="subscreen">
  <div class="settings-header">Google Mapa</div>
  <div class="settings-list">
    <div class="settings-item" style="height: 400px; padding: 0;">
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3976.739112092319!2d-74.08175368461397!3d4.609710543476287!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e3f99c908041715%3A0x402b5bdb621c80a5!2sBogot√°%2C%20Colombia!5e0!3m2!1ses-419!2sco!4v1600000000000!5m2!1ses-419!2sco"
        width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy">
      </iframe>
    </div>
  </div>
  <div class="home-button" onclick="closeGoogleMapa()"></div>
</div>


  <!-- Pantalla Informaci√≥n -->
  <div id="info-screen" class="subscreen">
    <div class="settings-header">Informaci√≥n</div>
    <div class="settings-list">
      <div class="settings-item">
        <strong>Nombre del sistema:</strong>
        <span>optiOS</span>
      </div>
      <div class="settings-item">
        <strong>Versi√≥n:</strong>
        <span>16.1</span>
      </div>
    </div>
    <div class="home-button" onclick="closeInfo()"></div>
  </div>

  <!-- App Safari -->
  <div id="safari-app" class="subscreen">
    <div class="safari-header">
      <div class="safari-toolbar">
        <button class="safari-btn" onclick="safariBack()">‚Üê</button>
        <button class="safari-btn" onclick="safariForward()">‚Üí</button>
        <button class="safari-btn" onclick="safariReload()">‚ü≥</button>
        <div class="safari-search-container">
          <input type="text" id="safari-url" class="safari-search" placeholder="Buscar o ingresar sitio web" onkeypress="safariNavigate(event)">
          <button class="safari-go-btn" onclick="safariGo()">Ir</button>
        </div>
      </div>
    </div>
    <div class="safari-content">
      <iframe id="safari-iframe" sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox" style="width: 100%; height: 100%; border: none;"></iframe>
    </div>
    <div class="home-button" onclick="closeSafari()"></div>
  </div>

  <!-- App Calculadora -->
  <div id="calculator-app" class="subscreen">
    <div class="calc-display" id="calc-display">0</div>
    <div class="calc-buttons">
      <button class="calc-btn calc-btn-function" onclick="calcFunction('AC')">AC</button>
      <button class="calc-btn calc-btn-function" onclick="calcFunction('¬±')">¬±</button>
      <button class="calc-btn calc-btn-function" onclick="calcFunction('%')">%</button>
      <button class="calc-btn calc-btn-operator" onclick="calcOperator('√∑')">√∑</button>
      
      <button class="calc-btn calc-btn-number" onclick="calcNumber('7')">7</button>
      <button class="calc-btn calc-btn-number" onclick="calcNumber('8')">8</button>
      <button class="calc-btn calc-btn-number" onclick="calcNumber('9')">9</button>
      <button class="calc-btn calc-btn-operator" onclick="calcOperator('√ó')">√ó</button>
      
      <button class="calc-btn calc-btn-number" onclick="calcNumber('4')">4</button>
      <button class="calc-btn calc-btn-number" onclick="calcNumber('5')">5</button>
      <button class="calc-btn calc-btn-number" onclick="calcNumber('6')">6</button>
      <button class="calc-btn calc-btn-operator" onclick="calcOperator('-')">‚àí</button>
      
      <button class="calc-btn calc-btn-number" onclick="calcNumber('1')">1</button>
      <button class="calc-btn calc-btn-number" onclick="calcNumber('2')">2</button>
      <button class="calc-btn calc-btn-number" onclick="calcNumber('3')">3</button>
      <button class="calc-btn calc-btn-operator" onclick="calcOperator('+')">+</button>
      
      <button class="calc-btn calc-btn-number calc-btn-zero" onclick="calcNumber('0')">0</button>
      <button class="calc-btn calc-btn-number" onclick="calcNumber('.')">.</button>
      <button class="calc-btn calc-btn-operator" onclick="calcEquals()">=</button>
    </div>
    <div class="home-button" onclick="closeCalculator()"></div>
  </div>

  <script>
    const settingsApp = document.getElementById("settings-app");
    const generalScreen = document.getElementById("general-screen");    
    const infoScreen = document.getElementById("info-screen");
    const safariApp = document.getElementById("safari-app");
    const safariIframe = document.getElementById("safari-iframe");
    const safariUrlInput = document.getElementById("safari-url");
    const calculatorApp = document.getElementById("calculator-app");
    const calcDisplay = document.getElementById("calc-display");
    const controlCenter = document.getElementById("control-center");
    const overlay = document.getElementById("overlay");
    const body = document.body;

    // Calculator variables
    let calcCurrentValue = '0';
    let calcPreviousValue = null;
    let calcOperation = null;
    let calcNewNumber = true;

    // Actualizar hora
    function updateTime() {
      const now = new Date();
      const hours = now.getHours().toString().padStart(2, '0');
      const minutes = now.getMinutes().toString().padStart(2, '0');
      document.getElementById('time').textContent = `${hours}:${minutes}`;
    }
    updateTime();
    setInterval(updateTime, 60000);

    // Control Center
    function toggleControlCenter() {
      controlCenter.classList.toggle("active");
      overlay.classList.toggle("active");
    }

    function closeControlCenter() {
      controlCenter.classList.remove("active");
      overlay.classList.remove("active");
    }

    function toggleItem(element, type) {
      element.classList.toggle("active");
    }

    function adjustBrightness(value) {
      document.body.style.filter = `brightness(${value}%)`;
    }

    // Settings App
    function openSettings() {
      const icon = event.target.closest('.app-icon');
      const rect = icon.getBoundingClientRect();
      const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
      const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;
      
      settingsApp.style.setProperty('--origin-x', centerX + '%');
      settingsApp.style.setProperty('--origin-y', centerY + '%');
      
      icon.classList.add('launching');
      setTimeout(() => {
        settingsApp.classList.add("active");
        settingsApp.classList.remove("closing");
      }, 100);
      
      setTimeout(() => {
        icon.classList.remove('launching');
      }, 600);
    }

    function closeSettings() {
      settingsApp.classList.add("closing");
      setTimeout(() => {
        settingsApp.classList.remove("active");
        settingsApp.classList.remove("closing");
      }, 500);
    }

    function toggleDarkMode() {
      const isDark = body.getAttribute("data-theme") === "dark";
      body.setAttribute("data-theme", isDark ? "light" : "dark");
    }

    function changeBackgroundColor() {
      const color = document.getElementById("bgColor").value;
      settingsApp.style.backgroundColor = color;
    }

    function changeLanguage() {
      const lang = document.getElementById("language").value;
      const labels = {
        es: ["Modo oscuro", "Color de fondo (App Ajustes)", "Idioma", "Cambiar fondo del men√∫ de inicio", "General", "Informaci√≥n"],
        en: ["Dark Mode", "Background Color (Settings)", "Language", "Change Home Screen Wallpaper", "General", "Information"],
        fr: ["Mode sombre", "Couleur de fond (R√©glages)", "Langue", "Changer le fond d'√©cran d'accueil", "G√©n√©ral", "Informations"]
      };

      const texts = document.querySelectorAll(".settings-item label");
      texts.forEach((el, i) => {
        el.textContent = labels[lang][i] || el.textContent;
      });

      const header = document.querySelector(".settings-header");
      if (header) {
        header.textContent = lang === "es" ? "Ajustes" : lang === "en" ? "Settings" : "Param√®tres";
      }
    }

    function setWallpaper(src) {
      document.body.style.background = `url('${src}') no-repeat center center`;
      document.body.style.backgroundSize = "cover";
    }

    function uploadCustomWallpaper(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          setWallpaper(e.target.result);
        }
        reader.readAsDataURL(file);
      }
    }

    function openGeneral() {
      const rect = event.target.getBoundingClientRect();
      const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
      const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;
      
      generalScreen.style.setProperty('--origin-x', centerX + '%');
      generalScreen.style.setProperty('--origin-y', centerY + '%');
      
      setTimeout(() => {
        generalScreen.classList.add("active");
        generalScreen.classList.remove("closing");
      }, 50);
    }

    function closeGeneral() {
      generalScreen.classList.add("closing");
      setTimeout(() => {
        generalScreen.classList.remove("active");
        generalScreen.classList.remove("closing");
      }, 500);
    }



    function openInfo() {
      const rect = event.target.getBoundingClientRect();
      const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
      const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;
      
      infoScreen.style.setProperty('--origin-x', centerX + '%');
      infoScreen.style.setProperty('--origin-y', centerY + '%');
      
      setTimeout(() => {
        infoScreen.classList.add("active");
        infoScreen.classList.remove("closing");
      }, 50);
    }

    function closeInfo() {
      infoScreen.classList.add("closing");
      setTimeout(() => {
        infoScreen.classList.remove("active");
        infoScreen.classList.remove("closing");
      }, 500);
    }

    // Safari Functions
    function openSafari() {
      const icon = event.target.closest('.app-icon');
      const rect = icon.getBoundingClientRect();
      const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
      const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;
      
      safariApp.style.setProperty('--origin-x', centerX + '%');
      safariApp.style.setProperty('--origin-y', centerY + '%');
      
      icon.classList.add('launching');
      setTimeout(() => {
        safariApp.classList.add("active");
        safariApp.classList.remove("closing");
        // Cargar p√°gina por defecto
        if (!safariIframe.src) {
          safariIframe.src = "https://www.google.com/webhp?igu=1";
          safariUrlInput.value = "google.com";
        }
      }, 100);
      
      setTimeout(() => {
        icon.classList.remove('launching');
      }, 600);
    }

    function closeSafari() {
      safariApp.classList.add("closing");
      setTimeout(() => {
        safariApp.classList.remove("active");
        safariApp.classList.remove("closing");
      }, 500);
    }

    function safariNavigate(event) {
      if (event.key === 'Enter') {
        safariGo();
      }
    }

    function safariGo() {
      let url = safariUrlInput.value.trim();
      if (!url) return;
      
      // Si no tiene protocolo, agregarlo
      if (!url.startsWith('http://') && !url.startsWith('https://')) {
        // Si parece una b√∫squeda, usar Google
        if (!url.includes('.') || url.includes(' ')) {
          url = 'https://www.google.com/search?igu=1&q=' + encodeURIComponent(url);
        } else {
          url = 'https://' + url;
        }
      }
      
      safariIframe.src = url;
      safariUrlInput.value = url.replace('https://', '').replace('http://', '');
    }

    function safariBack() {
      try {
        window.history.back();
      } catch(e) {
        console.log('No se puede retroceder');
      }
    }

    function safariForward() {
      try {
        window.history.forward();
      } catch(e) {
        console.log('No se puede avanzar');
      }
    }

    function safariReload() {
      safariIframe.src = safariIframe.src;
    }

    // Calculator Functions
    function openCalculator() {
      const icon = event.target.closest('.app-icon');
      const rect = icon.getBoundingClientRect();
      const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
      const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;
      
      calculatorApp.style.setProperty('--origin-x', centerX + '%');
      calculatorApp.style.setProperty('--origin-y', centerY + '%');
      
      icon.classList.add('launching');
      setTimeout(() => {
        calculatorApp.classList.add("active");
        calculatorApp.classList.remove("closing");
      }, 100);
      
      setTimeout(() => {
        icon.classList.remove('launching');
      }, 600);
    }

    function closeCalculator() {
      calculatorApp.classList.add("closing");
      setTimeout(() => {
        calculatorApp.classList.remove("active");
        calculatorApp.classList.remove("closing");
      }, 500);
    }

    function updateCalcDisplay() {
      const displayValue = parseFloat(calcCurrentValue);
      if (calcCurrentValue.length > 9) {
        calcDisplay.style.fontSize = '50px';
      } else if (calcCurrentValue.length > 7) {
        calcDisplay.style.fontSize = '60px';
      } else {
        calcDisplay.style.fontSize = '80px';
      }
      calcDisplay.textContent = calcCurrentValue;
    }

    function calcNumber(num) {
      if (calcNewNumber) {
        calcCurrentValue = num;
        calcNewNumber = false;
      } else {
        if (calcCurrentValue === '0' && num !== '.') {
          calcCurrentValue = num;
        } else {
          if (num === '.' && calcCurrentValue.includes('.')) return;
          calcCurrentValue += num;
        }
      }
      updateCalcDisplay();
    }

    function calcOperator(op) {
      if (calcOperation !== null && !calcNewNumber) {
        calcEquals();
      }
      calcPreviousValue = parseFloat(calcCurrentValue);
      calcOperation = op;
      calcNewNumber = true;
    }

    function calcEquals() {
      if (calcOperation === null || calcPreviousValue === null) return;
      
      const current = parseFloat(calcCurrentValue);
      let result = 0;
      
      switch(calcOperation) {
        case '+':
          result = calcPreviousValue + current;
          break;
        case '-':
          result = calcPreviousValue - current;
          break;
        case '√ó':
          result = calcPreviousValue * current;
          break;
        case '√∑':
          result = calcPreviousValue / current;
          break;
      }
      
      calcCurrentValue = result.toString();
      if (calcCurrentValue.length > 9) {
        calcCurrentValue = result.toExponential(5);
      }
      calcOperation = null;
      calcPreviousValue = null;
      calcNewNumber = true;
      updateCalcDisplay();
    }

    function calcFunction(func) {
      switch(func) {
        case 'AC':
          calcCurrentValue = '0';
          calcPreviousValue = null;
          calcOperation = null;
          calcNewNumber = true;
          break;
        case '¬±':
          calcCurrentValue = (parseFloat(calcCurrentValue) * -1).toString();
          break;
        case '%':
          calcCurrentValue = (parseFloat(calcCurrentValue) / 100).toString();
          break;
      }
      updateCalcDisplay();
    }






    function openGuide() {
  const rect = event.target.getBoundingClientRect();
  const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
  const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;

  const guideScreen = document.getElementById("guide-screen");
  guideScreen.style.setProperty('--origin-x', centerX + '%');
  guideScreen.style.setProperty('--origin-y', centerY + '%');

  setTimeout(() => {
    guideScreen.classList.add("active");
    guideScreen.classList.remove("closing");
  }, 50);
}

function closeGuide() {
  const guideScreen = document.getElementById("guide-screen");
  guideScreen.classList.add("closing");
  setTimeout(() => {
    guideScreen.classList.remove("active");
    guideScreen.classList.remove("closing");
  }, 500);
}




function openOptiMusic() {
  const icon = event.target.closest('.app-icon');
  const rect = icon.getBoundingClientRect();
  const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
  const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;

  const app = document.getElementById("optimusic-app");
  app.style.setProperty('--origin-x', centerX + '%');
  app.style.setProperty('--origin-y', centerY + '%');

  icon.classList.add('launching');
  setTimeout(() => {
    app.classList.add("active");
    app.classList.remove("closing");
  }, 100);
  setTimeout(() => {
    icon.classList.remove('launching');
  }, 600);
}

function closeOptiMusic() {
  const app = document.getElementById("optimusic-app");
  app.classList.add("closing");
  setTimeout(() => {
    app.classList.remove("active");
    app.classList.remove("closing");
  }, 500);
}


function handleMusicFiles(event) {
  const files = event.target.files;
  const listEl = document.getElementById("musicList");
  const player = document.getElementById("musicPlayer");
  listEl.innerHTML = "";

  if (!files.length) {
    listEl.innerHTML = "<li>No se seleccionaron canciones</li>";
    return;
  }

  Array.from(files).forEach(file => {
    const li = document.createElement("li");
    li.textContent = file.name;
    li.style.cursor = "pointer";

    li.onclick = () => {
      const url = URL.createObjectURL(file);
      player.src = url;
      player.play();
    };

    listEl.appendChild(li);
  });
}


function handleMusicFiles(event) {
  const files = event.target.files;
  const listEl = document.getElementById("musicList");
  const player = document.getElementById("musicPlayer");
  listEl.innerHTML = "";

  if (!files.length) {
    listEl.innerHTML = "<li>No se seleccionaron canciones</li>";
    return;
  }

  Array.from(files).forEach(file => {
    const li = document.createElement("li");
    li.textContent = file.name;
    li.style.cursor = "pointer";

    li.onclick = () => {
      const url = URL.createObjectURL(file);
      player.src = url;
      player.play();
    };

    listEl.appendChild(li);
  });
}



function guardarNota() {
  const nota = document.getElementById("noteArea").value;
  localStorage.setItem("notaGuardada", nota);
  alert("‚úÖ Nota guardada correctamente.");
}

function cargarNota() {
  const notaGuardada = localStorage.getItem("notaGuardada");
  if (notaGuardada !== null) {
    document.getElementById("noteArea").value = notaGuardada;
  }
}

function openNotas() {
  const icon = event.target.closest('.app-icon');
  const rect = icon.getBoundingClientRect();
  const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
  const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;

  const app = document.getElementById("notas-app");
  app.style.setProperty('--origin-x', centerX + '%');
  app.style.setProperty('--origin-y', centerY + '%');

  icon.classList.add('launching');
  setTimeout(() => {
    app.classList.add("active");
    app.classList.remove("closing");
    cargarNota(); // cargar nota al abrir
  }, 100);
  setTimeout(() => {
    icon.classList.remove('launching');
  }, 600);
}

function closeNotas() {
  const app = document.getElementById("notas-app");
  app.classList.add("closing");
  setTimeout(() => {
    app.classList.remove("active");
    app.classList.remove("closing");
  }, 500);
}

function notas() {
  const icon = event.target.closest('.app-icon');
  const rect = icon.getBoundingClientRect();
  const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
  const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;

  const app = document.getElementById("notas-app");
  app.style.setProperty('--origin-x', centerX + '%');
  app.style.setProperty('--origin-y', centerY + '%');

  icon.classList.add('launching');
  setTimeout(() => {
    app.classList.add("active");
    app.classList.remove("closing");
  }, 100);
  setTimeout(() => {
    icon.classList.remove('launching');
  }, 600);
}

function closeOptiMusic() {
  const app = document.getElementById("optimusic-app");
  app.classList.add("closing");
  setTimeout(() => {
    app.classList.remove("active");
    app.classList.remove("closing");
  }, 500);
}



function actualizarReloj() {
  const ahora = new Date();
  const horas = ahora.getHours().toString().padStart(2, '0');
  const minutos = ahora.getMinutes().toString().padStart(2, '0');
  const segundos = ahora.getSeconds().toString().padStart(2, '0');
  document.getElementById("reloj-hora").textContent = `${horas}:${minutos}:${segundos}`;
}

function iniciarReloj() {
  actualizarReloj();
  setInterval(actualizarReloj, 1000);
}

function openReloj() {
  const icon = event.target.closest('.app-icon');
  const rect = icon.getBoundingClientRect();
  const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
  const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;

  const app = document.getElementById("reloj-app");
  app.style.setProperty('--origin-x', centerX + '%');
  app.style.setProperty('--origin-y', centerY + '%');

  icon.classList.add('launching');
  setTimeout(() => {
    app.classList.add("active");
    app.classList.remove("closing");
    iniciarReloj();
  }, 100);
  setTimeout(() => {
    icon.classList.remove('launching');
  }, 600);
}

function closeReloj() {
  const app = document.getElementById("reloj-app");
  app.classList.add("closing");
  setTimeout(() => {
    app.classList.remove("active");
    app.classList.remove("closing");
  }, 500);
}


function openGoogleMapa() {
  const icon = event.target.closest('.app-icon');
  const rect = icon.getBoundingClientRect();
  const centerX = (rect.left + rect.width / 2) / window.innerWidth * 100;
  const centerY = (rect.top + rect.height / 2) / window.innerHeight * 100;

  const app = document.getElementById("googlemapa-app");
  app.style.setProperty('--origin-x', centerX + '%');
  app.style.setProperty('--origin-y', centerY + '%');

  icon.classList.add('launching');
  setTimeout(() => {
    app.classList.add("active");
    app.classList.remove("closing");
  }, 100);
  setTimeout(() => {
    icon.classList.remove('launching');
  }, 600);
}

function closeGoogleMapa() {
  const app = document.getElementById("googlemapa-app");
  app.classList.add("closing");
  setTimeout(() => {
    app.classList.remove("active");
    app.classList.remove("closing");
  }, 500);
}



  </script>
</body>
</html>
